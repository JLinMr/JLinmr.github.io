{"version":3,"file":"../../../static/friends_lite/main.js","names":["window","FriendCircleLite","constructor","rootId","this","root","document","getElementById","config","UserConfig","pageSize","page_turning_number","apiUrl","private_api_url","errorImg","error_img","start","allArticles","cacheKey","cacheTimeKey","cacheDuration","cache_duration","throttledLoadMore","throttle","loadMore","bind","imageObserver","IntersectionObserver","handleImageIntersection","fishingTimes","parseInt","localStorage","getItem","fishingClicks","isWorking","fishConfig","defaultFish","hungryFish","fishing_config","init","fcInstance","elements","container","querySelector","stats","random","handleClick","addEventListener","updateRandomArticle","loadInitialContent","loadArticles","data","fetchArticlesWithCache","article_data","updateStats","statistical_data","displayArticles","error","console","textContent","cached","getCache","fromCache","response","fetch","json","setCache","Error","cacheTime","Date","now","JSON","parse","setItem","stringify","toString","e","warn","isInitial","end","articles","slice","length","style","display","innerHTML","fragment","createDocumentFragment","forEach","article","appendChild","createCard","cards","querySelectorAll","index","animate","card","classList","remove","add","requestAnimationFrame","setTimeout","animateCards","isLoading","createElement","className","link","title","author","avatar","created","substring","target","closest","dataset","open","authorData","showAuthorModal","id","contains","friends_num","active_num","article_num","last_updated_time","level","getFishingLevel","levelInfo","Math","delay","floor","Promise","resolve","randomArticle","tips","randomTip","times","modal","authorArticles","filter","a","map","join","URL","origin","onclick","parentNode","removeChild","once","body","func","limit","inThrottle","args","apply","entries","observer","entry","isIntersecting","img","src","unobserve","cleanup","removeEventListener","disconnect","initializeFriendCircleLite","instance","readyState"],"sources":["static/friends_lite/main.js"],"mappings":"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","ignoreList":[],"sourcesContent":["// ä¿®æ”¹ç±»å£°æ˜ï¼Œé˜²æ­¢é‡å¤å®šä¹‰\nif (typeof window.FriendCircleLite === 'undefined') {\n    window.FriendCircleLite = class {\n        constructor(rootId) {\n            this.root = document.getElementById(rootId);\n            if (!this.root) return;\n            \n            const config = UserConfig ?? {};\n            this.pageSize = config.page_turning_number ?? 25;\n            this.apiUrl = config.private_api_url ?? 'https://fc.ruom.top';\n            this.errorImg = config.error_img ?? 'https://fastly.jsdelivr.net/gh/JLinMr/Friend-Circle-Lite@latest/static/favicon.ico';\n            this.start = 0;\n            this.allArticles = [];\n            this.cacheKey = 'fcl_cache';\n            this.cacheTimeKey = 'fcl_time';\n            this.cacheDuration = config.cache_duration ?? 10 * 60 * 1000; // é»˜è®¤10åˆ†é’Ÿ\n\n            this.throttledLoadMore = this.throttle(this.loadMore.bind(this), 500);\n            this.imageObserver = new IntersectionObserver(this.handleImageIntersection.bind(this));\n\n            this.fishingTimes = parseInt(localStorage.getItem('fcl_fishing_times') || '0');\n            this.fishingClicks = parseInt(localStorage.getItem('fcl_fishing_clicks') || '0');\n            this.isWorking = false;\n\n            this.fishConfig = {\n                defaultFish: 100,\n                hungryFish: 100,\n                ...UserConfig?.fishing_config\n            };\n\n            this.init();\n            window.fcInstance = this;\n        }\n\n        init() {\n            this.elements = {\n                container: this.root.querySelector('.articles-container'),\n                loadMore: this.root.querySelector('#load-more'),\n                stats: this.root.querySelector('#stats'),\n                random: this.root.querySelector('#random-article')\n            };\n\n            // äº‹ä»¶å§”æ‰˜\n            this.handleClick = this.handleClick.bind(this);\n            this.root.addEventListener('click', this.handleClick);\n            window.updateRandomArticle = () => this.updateRandomArticle();\n            \n            this.loadInitialContent();\n        }\n\n        async loadInitialContent() {\n            // ç§»é™¤æ·»åŠ éª¨æ¶å±çš„é€»è¾‘ï¼Œç›´æ¥åŠ è½½æ–‡ç« \n            await this.loadArticles();\n        }\n\n        async loadArticles() {\n            try {\n                const {data} = await this.fetchArticlesWithCache();\n                if (data?.article_data) {\n                    this.allArticles = data.article_data;\n                    this.updateStats(data.statistical_data);\n                    this.updateRandomArticle();\n                    await this.displayArticles(true);\n                }\n            } catch (error) {\n                console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);\n                this.elements.loadMore.textContent = 'åŠ è½½å¤±è´¥';\n            }\n        }\n\n        async fetchArticlesWithCache() {\n            try {\n                const cached = this.getCache();\n                if (cached) return { data: cached, fromCache: true };\n\n                const response = await fetch(`${this.apiUrl}all.json`);\n                const data = await response.json();\n                \n                this.setCache(data);\n                return { data, fromCache: false };\n            } catch (error) {\n                throw new Error('è·å–æ–‡ç« åˆ—è¡¨å¤±è´¥');\n            }\n        }\n\n        getCache() {\n            try {\n                const cacheTime = localStorage.getItem(this.cacheTimeKey);\n                if (!cacheTime) return null;\n                \n                const now = Date.now();\n                if (now - parseInt(cacheTime) >= this.cacheDuration) return null;\n                \n                const cached = localStorage.getItem(this.cacheKey);\n                return cached ? JSON.parse(cached) : null;\n            } catch {\n                return null;\n            }\n        }\n\n        setCache(data) {\n            try {\n                localStorage.setItem(this.cacheKey, JSON.stringify(data));\n                localStorage.setItem(this.cacheTimeKey, Date.now().toString());\n            } catch (e) {\n                console.warn('ç¼“å­˜å­˜å‚¨å¤±è´¥:', e);\n            }\n        }\n\n        async displayArticles(isInitial = false) {\n            const start = isInitial ? 0 : this.start;\n            const end = start + this.pageSize;\n            const articles = this.allArticles.slice(start, end);\n            \n            if (articles.length === 0) {\n                this.elements.loadMore.style.display = 'none';\n                return;\n            }\n\n            if (isInitial) {\n                this.elements.container.innerHTML = '';\n            }\n\n            const fragment = document.createDocumentFragment();\n            articles.forEach(article => {\n                fragment.appendChild(this.createCard(article));\n            });\n            \n            this.elements.container.appendChild(fragment);\n            \n            // ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–åŠ¨ç”»æ˜¾ç¤º\n            const animateCards = () => {\n                const cards = this.elements.container.querySelectorAll('.card.loading');\n                let index = 0;\n                \n                const animate = () => {\n                    if (index >= cards.length) return;\n                    \n                    const card = cards[index];\n                    card.classList.remove('loading');\n                    card.querySelector('.skeleton-content').classList.add('hidden');\n                    card.querySelector('.real-content').classList.remove('hidden');\n                    \n                    index++;\n                    requestAnimationFrame(animate);\n                };\n\n                setTimeout(() => {\n                    requestAnimationFrame(animate);\n                }, isInitial ? 1000 : 500);\n            };\n\n            animateCards();\n\n            this.start = end;\n            this.elements.loadMore.style.display = \n                this.start >= this.allArticles.length ? 'none' : 'block';\n        }\n\n        createCard(article, isLoading = true) {\n            const card = document.createElement('div');\n            card.className = `card ${isLoading ? 'loading' : ''}`;\n            \n            card.innerHTML = `\n                ${isLoading ? `\n                    <div class=\"skeleton-content\">\n                        <div class=\"skeleton card-title\"></div>\n                        <div class=\"card-info\">\n                            <div class=\"skeleton card-author\"></div>\n                            <div class=\"skeleton card-date\"></div>\n                        </div>\n                    </div>\n                ` : ''}\n                <div class=\"real-content ${isLoading ? 'hidden' : ''}\">\n                    <div class=\"card-title\" data-link=\"${article.link}\">${article.title}</div>\n                    <div class=\"card-info\">\n                        <div class=\"card-author\" data-author=\"${article.author}\" data-avatar=\"${article.avatar}\" data-link=\"${article.link}\">\n                            <img src=\"${article.avatar}\" data-error-img=\"${this.errorImg}\" onerror=\"if(!this.retried){this.retried=true;this.src=this.dataset.errorImg}\">\n                            ${article.author}\n                        </div>\n                        <div class=\"card-date\">ğŸ—“ï¸${article.created?.substring(0, 10) || ''}</div>\n                    </div>\n                    <img class=\"card-bg\" src=\"${article.avatar}\" data-error-img=\"${this.errorImg}\" onerror=\"if(!this.retried){this.retried=true;this.src=this.dataset.errorImg}\">\n                </div>\n            `;\n            \n            return card;\n        }\n\n        handleClick(e) {\n            const target = e.target;\n            \n            if (target.closest('.card-title')) {\n                const link = target.closest('.card-title').dataset.link;\n                if (link) window.open(link, '_blank');\n            }\n            \n            if (target.closest('.card-author')) {\n                const authorData = target.closest('.card-author').dataset;\n                if (authorData.author && authorData.avatar && authorData.link) {\n                    this.showAuthorModal(authorData);\n                }\n            }\n            \n            if (target.id === 'load-more') {\n                this.loadMore();\n            }\n\n            if (target.classList.contains('random-refresh') || target.closest('.random-refresh')) {\n                this.updateRandomArticle();\n            }\n\n            if (target.classList.contains('random-title')) {\n                const link = target.dataset.link;\n                if (link) window.open(link, '_blank');\n            }\n            \n            if (target.classList.contains('random-author')) {\n                const authorData = {\n                    author: target.dataset.author,\n                    avatar: target.dataset.avatar,\n                    link: target.dataset.link\n                };\n                this.showAuthorModal(authorData);\n            }\n\n            if (target.classList.contains('random-title') || \n                target.classList.contains('card-title')) {\n                this.fishingClicks++;\n                localStorage.setItem('fcl_fishing_clicks', this.fishingClicks.toString());\n            }\n        }\n\n        updateStats(stats) {\n            if (!stats) return;\n            this.elements.stats.innerHTML = `\n                <div>Powered by: <a href=\"https://github.com/willow-god/Friend-Circle-Lite\" target=\"_blank\" rel=\"nofollow\">FriendCircleLite</a></div>\n                <div>Designed By: <a href=\"https://www.liushen.fun/\" target=\"_blank\" rel=\"nofollow\">LiuShen</a></div>\n                <div>è®¢é˜…:${stats.friends_num} æ´»è·ƒ:${stats.active_num} æ€»æ–‡ç« æ•°:${stats.article_num}</div>\n                <div>æ›´æ–°æ—¶é—´:${stats.last_updated_time}</div>\n            `;\n        }\n\n        async updateRandomArticle() {\n            if (this.isWorking) return;\n            this.isWorking = true;\n\n            // è·å–å½“å‰ç­‰çº§ä¿¡æ¯\n            const level = this.getFishingLevel();\n            const levelInfo = this.fishingTimes >= 5 ? \n                `ï¼ˆLv.${this.fishingTimes} å½“å‰ç§°å·ï¼š${level}ï¼‰` : \n                '';\n\n            // æ£€æŸ¥æ˜¯å¦é¥¥é¥¿\n            const isHungry = this.fishingClicks * this.fishConfig.hungryFish + this.fishConfig.defaultFish < this.fishingTimes \n                && Math.random() < 0.5;\n            \n            if (isHungry) {\n                this.elements.random.innerHTML = `\n                    <div class=\"random-content\">\n                        å› ä¸ºåªé’“é±¼ä¸åƒé±¼ï¼Œè¿‡åˆ†é¥¥é¥¿å¯¼è‡´æœ¬æ¬¡é’“é±¼å¤±è´¥...${levelInfo}<br>\n                        (ç‚¹å‡»ä»»æ„ä¸€ç¯‡é’“é±¼è·å¾—çš„æ–‡ç« å³å¯æ¢å¤ï¼‰\n                    </div>\n                `;\n                this.isWorking = false;\n                return;\n            }\n\n            // æ˜¾ç¤ºé’“é±¼ä¸­çŠ¶æ€\n            this.elements.random.innerHTML = `\n                <div class=\"random-content\">\n                    é’“é±¼ä¸­... ${levelInfo}\n                </div>\n            `;\n\n            // éšæœºå»¶è¿Ÿ\n            const delay = this.fishingTimes === 0 ? 0 : Math.floor(Math.random() * 2000) + 1000;\n            await new Promise(resolve => setTimeout(resolve, delay));\n\n            const randomArticle = this.allArticles[Math.floor(Math.random() * this.allArticles.length)];\n            if (!randomArticle) {\n                this.isWorking = false;\n                return;\n            }\n\n            // è·å–éšæœºæç¤ºè¯­\n            const tips = [\n                \"é’“åˆ°äº†ç»ä¸–å¥½æ–‡ï¼\",\n                \"åœ¨æ²³è¾¹æ‰“äº†ä¸ªå–·åšï¼Œå“è·‘äº†\",\n                \"ä½ å’Œå°ä¼™ä¼´æŠ¢å¤ºç€\",\n                \"ä½ å‡»è´¥äº†å·¨é¾™ï¼Œåœ¨å·¢ç©´ä¸­å‘ç°äº†\",\n                \"æŒ–æ˜ç§¦å§‹çš‡åŸæ—¶æ‰¾åˆ°äº†\",\n                \"åœ¨è·¯è¾¹é—²é€›çš„æ—¶å€™éšæ‰‹ä¹°äº†ä¸€ä¸ª\",\n                \"ä»å­¦æ ¡ç­ä¸»ä»»é‚£æ‹¿æ¥äº†å­©å­ä¸Šè¯¾å·å·çœ‹çš„\",\n                \"ä½ çš„åŒæ¡Œæ— æƒ…çš„ä»ä½ çš„è¯­æ–‡ä¹¦ä¸­æ’•ä¸‹äº†é‚£ç¯‡ä½ æœ€å–œæ¬¢çš„\",\n                \"è€ƒå¤å­¦å®¶è¿‘æ—¥å‘ç°äº†\",\n                \"å¤–æ˜Ÿäººé™ä¸´åœ°çƒå­¦ä¹ åœ°çƒæ–‡åŒ–ï¼Œè½åœ°æ—¶è¢«ä½ å¡äº†\",\n                \"ä»å›¾ä¹¦é¦†é¡¶å±‚çš„éšç§˜è§’è½é‡Œå‘ç°äº†é—ªç€é‡‘å…‰çš„\",\n                \"å¾’å¼Ÿä¿®ç‚¼èµ°ç«å…¥é­”ï¼Œä¸ºå¸ˆç«‹åˆ»æå‡ºäº†\",\n                \"åœ¨å¤§å±±ä¸­å”±å±±æ­Œï¼Œéš”å£çš„é˜¿å¦¹è·‘æ¥äº†ï¼Œå¸¦ç€\",\n                \"éš”å£å®¶çš„å­©å­æ•°å­¦è€ƒäº†æ»¡åˆ†ï¼Œéƒ½æ˜¯å› ä¸ºçœ‹äº†\",\n                \"éš”å£å®¶çš„å­©å­è‹±è¯­è€ƒäº†æ»¡åˆ†ï¼Œéƒ½æ˜¯å› ä¸ºçœ‹äº†\",\n                \"å°ç±³ç ”å‘äº†å…¨æ–°ä¸€ä»£MIXæ‰‹æœºï¼Œæ®è¯´çµæ„Ÿ\",\n                \"ä¿®ç‚¼æ¸¡åŠ«æˆåŠŸï¼Œè¿˜å¥½æå‰çœ‹äº†\",\n                \"åº“å…‹åä¸Šäº†è‹¹æœCEOçš„å®åº§ï¼Œå› ä¸ºä»–é¢è¯•çš„æ—¶å€™çœ‹äº†\",\n                \"é˜¿é‡Œå·´å·´å¤§å–ŠèŠéº»å¼€é—¨ï¼Œæ˜ å…¥çœ¼å¸˜çš„å°±æ˜¯\",\n                \"å¸ˆå‚…è¯´ç»ƒæ­¦è¦å…ˆç‚¼å¿ƒï¼Œç„¶åè®©æˆ‘å¥½ç”Ÿç ”è¯»\",\n                \"ç§‘è€ƒé˜Ÿåœ¨å—æå¤§é™†å‘ç°äº†è¢«å†°å°çš„\",\n                \"é£æœºçª—æˆ·ä¼¼ä¹è¢«ä¸€å¼ çº¸ç³Šä¸Šäº†ï¼Œä»”ç»†ä¸€çœ‹æ˜¯\",\n                \"å†å²ä¸Šæ»¡å†™çš„ä»ä¹‰é“å¾·å››ä¸ªå­—ï¼Œé€è¿‡å­—ç¼é‡Œå´å…¨æ˜¯\",\n                \"åå‡ å¹´å‰çš„å½•éŸ³æœºä¼¼ä¹è¿˜èƒ½å¤Ÿä½¿ç”¨ï¼Œæ’ä¸Šç”µå‘ç°æ­£åœ¨æ’­çš„æ˜¯\",\n                \"æ–°ç‰ˆè¯­æ–‡ä¹¦æ‹Ÿå¢åŠ ä¸€ç¯‡ç†Ÿè¯»å¹¶èƒŒè¯µçš„\",\n                \"ç»è°ƒæŸ¥ï¼Œ99%çš„å—è®¿è€…éƒ½æ²¡æœ‰èƒŒè¯µè¿‡\",\n                \"ä»Šå¹´çš„é«˜è€ƒæ»¡åˆ†ä½œæ–‡æ˜¯\",\n                \"å”åƒ§æ­å¼€äº†ä½›ç¥–å‹åœ¨äº”æŒ‡å±±ä¸Šçš„\",\n                \"ç§‘å­¦å®¶å‘ç°èƒ½å¤Ÿè§£å†³è¡°è€çš„ç§˜å¯†ï¼Œå°±æ˜¯æ¯æ—¥ç ”è¯»\",\n                \"è‹±ç‰¹å°”å‘å¸ƒäº†å…¨æ–°çš„è‡³å¼ºå¤„ç†å™¨ï¼Œå…¶èŠ¯ç‰‡çš„åˆ¶é€ åŸç†éƒ½æ˜¯\",\n                \"æ–°çš„iPhoneäº§èƒ½å¾ˆè¶³ï¼Œæ–°çš„è¿›è´§æ¸ é“æ˜¯\",\n                \"ä»Šå¹´äº©äº§çªç ´äº†å…«åƒä¸‡æ–¤ï¼Œå¤šäºäº†\",\n                \"é™†éšä¸€ç»Ÿå¤©ä¸Šå®—ï¼Œåœ¨æ— æ•°ç¥–å¢ƒé«˜æ‰‹çš„ç›®å…‰ä¸‹å®£è¯»äº†\",\n                \"é»‘é’»é£è·Ÿç™½é’»é£è¯´é“ï¼Œåƒäº†å”åƒ§è‚‰èƒ½é•¿ç”Ÿä¸è€ï¼Œä»–çŸ¥é“æ˜¯å› ä¸ºçœ‹äº†\",\n                \"ä¸Šå«ç”Ÿé—´æ²¡å¸¦çº¸ï¼Œç›´æ¥æè£¤è·‘è·¯ä¹Ÿä¸æ„¿æ„ç·æ±¡æ‰‹ä¸­\",\n                \"ç§ä¸‹ä¸€ç¯‡æ–‡ç« å°±ä¼šäº§ç”Ÿå¾ˆå¤šå¾ˆå¤šæ–‡ç« ï¼Œæˆ‘ç§ä¸‹äº†\",\n                \"ä¸‰åå¹´æ²³ä¸œï¼Œä¸‰åå¹´æ²³è¥¿ï¼Œè«æ¬ºæˆ‘æ²¡æœ‰çœ‹è¿‡\",\n                \"è¸ç ´é“è¡€æ— è§…å¤„ï¼Œå¾—æ¥å…¨é \",\n                \"ä»Šæ—¥åŒè‰²çƒä¸­äº†ä¸¤åƒä¸‡ï¼Œé¢„æµ‹å…¨é \",\n                \"å› ä¸ºå·å­ä¸Šæ²¡å†™åå­—ï¼Œè€å¸ˆç½šæŠ„\",\n                \"ä¸ºäº†æŠ—è®®ä¸–é—´çš„ä¸å…¬ï¼Œå‰²ç ´æ‰‹æŒ‡å†™ä¸‹äº†\",\n                \"åœ¨è‰ºæœ¯å¤§è¡—ä¸Šè¢«è´´æ»¡äº†ç›¸åŒçš„çº¸ï¼Œèµ°è¿‘ä¸€çœ‹æ˜¯\",\n                \"è¿™åŒºåŒºè¿·é˜µå²‚èƒ½éš¾å¾—ä½æˆ‘ï¼Ÿå…¶å®èƒ½èµ°å‡ºæ¥å¤šäºäº†\",\n                \"ä»Šæ—¥è¢«ä¸€ç¯‡æ–‡ç« é¡¶ä¸Šäº†å¾®åšçƒ­æœï¼Œå®ƒæ˜¯\",\n                \"ä½ é€ç»™ä¹ä¸ä¸€ä¸ªæš´å¯Œç§˜ç±ï¼Œå®ƒæ˜¯\",\n                \"UZIä¸€ä¸ªèµ°Aæ‹¿ä¸‹äº”æ€ï¼Œåœ¨äº‹åé‡‡è®¿æ—¶è¯´ä»–å½“æ—¶å›æƒ³èµ·äº†\",\n                \"ç§‘å­¦å®¶è§£åˆ¨äº†ç¬¬ä¸€ä¸ªæ„ŸæŸ“ä¸§å°¸ç—…æ¯’çš„äººï¼Œå‘ç°ä¸§å°¸æŠ—ä½“å­˜åœ¨äº\",\n                \"å¦‚æœä½ æœ‰æ¢¦æƒ³çš„è¯ï¼Œå°±è¦åŠªåŠ›å»çœ‹\",\n                \"å†³å®šæˆ‘ä»¬æˆä¸ºä»€ä¹ˆæ ·äººçš„ï¼Œä¸æ˜¯æˆ‘ä»¬çš„èƒ½åŠ›ï¼Œè€Œæ˜¯æ˜¯å¦çœ‹è¿‡\",\n                \"æœ‰ä¿¡å¿ƒä¸ä¸€å®šä¼šæˆåŠŸï¼Œæ²¡ä¿¡å¿ƒå°±å»çœ‹\",\n                \"ä½ çœŸæ­£æ˜¯è°å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä½ çœ‹æ²¡çœ‹è¿‡\",\n                \"ç„å¤©å¢ƒé‡è¦çš„æ˜¯é”»ä½“ï¼Œä¸ºå¸ˆèµ ä½ æ­¤ä¹¦ï¼Œå¥½å¥½ä¿®ç‚¼å»å§ï¼Œè¿™æ˜¯\",\n                \"ä¸Šç™¾ç¥–å¢ƒé«˜æ‰‹åœ¨å¤©å¨æ¹–å¤§æˆ˜ä¸‰å¤©ä¸‰å¤œä¸ºäº†æŠ¢å¤º\",\n                \"è¿™åŒ–ä»™æ± æ°´ä¹ƒä¸Šå¤çœŸä»™å¯¹åäººçš„è€ƒæ ¡ï¼Œè¦æ±‚ç†Ÿè¯»å¹¶èƒŒè¯µ\",\n                \"åº†æ°ä¸‰åƒå¹´æ ¹åŸºå·®ç‚¹ç«Ÿè¢«ä½ å°å­æ¯äºä¸€æ—¦ï¼Œèƒ½å¤Ÿè¢«æˆ‘æ‹¯æ•‘å…¨æ˜¯å› ä¸ºæˆ‘çœ‹äº†\",\n                \"æˆ‘å°±æ˜¯ç¥å¥‡å®è´å¤§å¸ˆï¼æˆ‘è¿™åªçš®å¡ä¸˜å¯æ˜¯\",\n                \"æˆ‘å°±æ˜¯ç¥å¥‡å®è´å¤§å¸ˆï¼æˆ‘è¿™åªå°ç«é¾™å¯æ˜¯\",\n                \"æˆ‘å°±æ˜¯ç¥å¥‡å®è´å¤§å¸ˆï¼æˆ‘è¿™åªå¯è¾¾é¸­å¯æ˜¯\",\n                \"æˆ‘å°±æ˜¯ç¥å¥‡å®è´å¤§å¸ˆï¼æˆ‘è¿™åªæ°å°¼é¾Ÿå¯æ˜¯\",\n                \"ä¸Šå¤é—è¿¹ä¸­å†™é“ï¼Œåªè¦ä¹ å¾—æ­¤ä¹¦ï¼Œä¾¿å¾—æˆåŠŸã€‚ä½ å®šç›ä¸€çœ‹ï¼ŒåŸæ¥æ˜¯\",\n                \"å¥¶å¥¶çš„ï¼Œç©é˜´çš„æ˜¯å§ï¼Œæˆ‘å°±æ˜¯åŒæ–™ç‰¹å·¥ä»£å·ç©¿å±±ç”²ï¼Œ\",\n                \"ä½ çš„èƒŒæ™¯å¤ªå‡äº†ï¼Œæˆ‘çš„å°±é€¼çœŸå¤šäº†ï¼Œå­¦åˆ°è¿™ä¸ªæŠ€æœ¯å…¨æ˜¯å› ä¸ºçœ‹äº†\",\n                \"æˆ‘æ˜¯äº‘å—çš„ï¼Œäº‘å—æ€’æ±Ÿçš„ï¼Œæ€’æ±ŸèŠ¦æ°´å¸‚ï¼ŒèŠ¦æ°´å¸‚å…­åº“ï¼Œå…­åº“å‚ˆåƒ³æ—ï¼Œå‚ˆåƒ³æ—æ˜¯\",\n                \"æˆ‘çœŸçš„æ “Qäº†ï¼Œæˆ‘çœŸçš„ä¼šè°¢å¦‚æœä½ çœ‹\",\n                \"ä½ å·²ç»ä¹ å¾—é€€é€€é€€ç¥åŠŸï¼Œæ¥ä¸‹æ¥çš„å¿ƒæ³•å·²ç»è¢«è®°å½•åœ¨\",\n                \"äººç”Ÿæ— å¸¸å¤§è‚ åŒ…å°è‚ ï¼Œå°è‚ åŒ…ä½äº†\",\n                \"ä½ æŠ½åˆ°äº†æ™®é€šæ–‡ç« ï¼Œå®ƒæ˜¯\",\n                \"ä½ æ”¶åˆ°äº†ç¨€æœ‰æ–‡ç« ï¼Œå®ƒæ˜¯\",\n                \"ä½ æŠ½åˆ°äº†é‡‘è‰²æ™®é€šæ–‡ç« ï¼Œå®ƒæ˜¯\",\n                \"ä½ æŠ½åˆ°äº†é‡‘è‰²ç¨€æœ‰æ–‡ç« ï¼Œå®ƒæ˜¯\",\n                \"ä½ æŠ½åˆ°äº†ä¼ è¯´æ–‡ç« ï¼å®ƒæ˜¯\",\n                \"å“‡ï¼é‡‘è‰²ä¼ è¯´ï¼ä½ æŠ½åˆ°äº†é‡‘è‰²ä¼ è¯´æ–‡ç« ï¼Œå®ƒæ˜¯\",\n                \"æŠ¥å‘Šï¼ä¾¦å¯Ÿå…µè¯´åœ¨å‰å¾€300ç±³æœ‰ä¸€ä¸ªç”·å­åœ¨å·å·çœ‹ä¸€æœ¬ä¹¦ï¼Œä¸Šé¢èµ«ç„¶å†™ç€\",\n                \"èŠ·è²å§‘å¨˜å¤§æ‘†æ“‚å°ï¼Œè°è‹¥æ˜¯èƒ½è¯»å®Œæ­¤ä¹¦ï¼Œä¾¿å¯å¨¶äº†å¥¹ã€‚ç„¶åä»èƒŒåæå‡ºäº†\",\n                \"è¯·é—®ä½ çš„æ¢¦æƒ³æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çš„æ¢¦æƒ³æ˜¯èƒ½è¯»åˆ°\",\n                \"è¯»ä»€ä¹ˆæ‰èƒ½å¢æ™ºæ…§ï¼Ÿå½“ç„¶æ˜¯è¯»\",\n                \"çº³å…°å«£ç„¶æå‡ºäº†é€€å©šä¹¦ï¼Œå¯æ˜¯å‘ç°å‡ºé—¨å¸¦é”™äº†ï¼Œç»“æœæ‹¿å‡ºäº†ä¸€æœ¬\",\n                \"ä½ è¦å°½å…¨åŠ›ä¿æŠ¤ä½ çš„æ¢¦æƒ³ã€‚é‚£äº›å˜²ç¬‘ä½ çš„äººï¼Œä»–ä»¬å¿…å®šä¼šå¤±è´¥ï¼Œä»–ä»¬æƒ³æŠŠä½ å˜æˆå’Œä»–ä»¬ä¸€æ ·çš„äººã€‚å¦‚æœä½ æœ‰æ¢¦æƒ³çš„è¯ï¼Œå°±è¦åŠªåŠ›å»è¯»\",\n                \"èµ°äººç”Ÿçš„è·¯å°±åƒçˆ¬å±±ä¸€æ ·ï¼Œçœ‹èµ·æ¥èµ°äº†è®¸å¤šå†¤æ‰çš„è·¯ï¼Œå´å²–çš„è·¯ï¼Œä½†ç»ˆç©¶éœ€è¦è¯»å®Œ\",\n                \"æ¸¸æˆçš„è§„åˆ™å°±æ˜¯è¿™ä¹ˆçš„ç®€å•ï¼Œä½ å¬æ‡‚äº†å—ï¼Ÿç®¡ä½ å¬æ²¡å¬æ‡‚ï¼Œå¿«å»çœ‹\",\n            ];\n            const randomTip = tips[Math.floor(Math.random() * tips.length)];\n\n            this.elements.random.innerHTML = `\n                <div class=\"random-content\">\n                    ${randomTip}\n                    <span class=\"random-author\" data-author=\"${randomArticle.author}\" \n                        data-avatar=\"${randomArticle.avatar}\" \n                        data-link=\"${randomArticle.link}\">${randomArticle.author}</span>\n                    çš„\n                    <span class=\"random-title\" data-link=\"${randomArticle.link}\">${randomArticle.title}</span>\n                </div>\n            `;\n\n            // æ›´æ–°é’“é±¼æ¬¡æ•°\n            this.fishingTimes++;\n            localStorage.setItem('fcl_fishing_times', this.fishingTimes.toString());\n            \n            this.isWorking = false;\n        }\n\n        getFishingLevel() {\n            const times = this.fishingTimes;\n            if (times > 10000) return \"æ„¿è€…ä¸Šé’©\";\n            if (times > 1000) return \"ä¿¯è§ˆå¤©ä¸‹\";\n            if (times > 100) return \"ç»ä¸–æ¸”å¤«\";\n            if (times > 75) return \"é’“é±¼ç‹è€…\";\n            if (times > 50) return \"é’“é±¼å®—å¸ˆ\";\n            if (times > 20) return \"é’“é±¼ä¸“å®¶\";\n            if (times > 5) return \"é’“é±¼é«˜æ‰‹\";\n            return \"é’“é±¼æ–°æ‰‹\";\n        }\n\n        showAuthorModal({author, avatar, link}) {\n            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ modal\n            let modal = document.getElementById('modal');\n            if (!modal) {\n                modal = document.createElement('div');\n                modal.id = 'modal';\n                modal.className = 'modal';\n            }\n            \n            const authorArticles = this.allArticles\n                .filter(a => a.author === author)\n                .slice(0, 5)\n                .map(a => `\n                    <div class=\"modal-article\">\n                        <a class=\"modal-article-title\" href=\"${a.link}\" target=\"_blank\">${a.title}</a>\n                        <div class=\"modal-article-date\">ğŸ“…${a.created.substring(0, 10)}</div>\n                    </div>\n                `).join('');\n\n            modal.innerHTML = `\n                <div class=\"modal-content\">\n                    <img class=\"modal-avatar\" src=\"${avatar}\" alt=\"${author}\" data-error-img=\"${this.errorImg}\" onerror=\"if(!this.retried){this.retried=true;this.src=this.dataset.errorImg}\">\n                    <a href=\"${new URL(link).origin}\" class=\"modal-link\" target=\"_blank\">${author}</a>\n                    <div class=\"modal-articles\">${authorArticles}</div>\n                    <img class=\"modal-background\" src=\"${avatar}\" alt=\"\" data-error-img=\"${this.errorImg}\" onerror=\"if(!this.retried){this.retried=true;this.src=this.dataset.errorImg}\">\n                </div>\n            `;\n\n            modal.onclick = e => {\n                if (e.target === modal) {\n                    modal.classList.remove('modal-open');\n                    modal.addEventListener('transitionend', () => {\n                        modal.style.display = 'none';\n                        if (modal.parentNode) {\n                            modal.parentNode.removeChild(modal);\n                        }\n                    }, { once: true });\n                }\n            };\n\n            document.body.appendChild(modal);\n            modal.style.display = 'block';\n            setTimeout(() => modal.classList.add('modal-open'), 10);\n        }\n\n        loadMore() {\n            this.displayArticles();\n        }\n\n        throttle(func, limit) {\n            let inThrottle;\n            return function(...args) {\n                if (!inThrottle) {\n                    func.apply(this, args);\n                    inThrottle = true;\n                    setTimeout(() => inThrottle = false, limit);\n                }\n            }\n        }\n\n        handleImageIntersection(entries, observer) {\n            entries.forEach(entry => {\n                if (entry.isIntersecting) {\n                    const img = entry.target;\n                    img.src = img.dataset.src;\n                    observer.unobserve(img);\n                }\n            });\n        }\n\n        cleanup() {\n            // æ¸…ç†äº‹ä»¶ç›‘å¬\n            this.root?.removeEventListener('click', this.handleClick);\n            // æ¸…ç† IntersectionObserver\n            this.imageObserver?.disconnect();\n            // é‡ç½®å˜é‡\n            this.start = 0;\n            this.allArticles = [];\n        }\n    }\n}\n\n// å°†åˆå§‹åŒ–å‡½æ•°ä¹Ÿæ”¾åˆ°å…¨å±€ä½œç”¨åŸŸ\nif (typeof window.initializeFriendCircleLite === 'undefined') {\n    window.initializeFriendCircleLite = (() => {\n        let instance = null;\n        return () => {\n            if (instance) {\n                instance.cleanup();\n                window.fcInstance = null;\n            }\n            instance = new window.FriendCircleLite('friend-circle-lite-root');\n            return instance;\n        };\n    })();\n}\n\n// ä¿®æ”¹åˆå§‹åŒ–é€»è¾‘\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', window.initializeFriendCircleLite);\n} else {\n    window.initializeFriendCircleLite();\n}\n\n// PJAX æ”¯æŒ\ndocument.addEventListener('pjax:complete', window.initializeFriendCircleLite);"]}