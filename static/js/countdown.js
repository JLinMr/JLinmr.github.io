const CountdownTimer=(()=>{const e={targetDate:"2025-01-29",targetName:"春节",units:{day:{text:"今日",divider:1,unit:"小时"},week:{text:"本周",divider:24,unit:"天"},month:{text:"本月",divider:24,unit:"天"},year:{text:"本年",divider:24,unit:"天"}}};function t(t){const n=new Date,a=new Date(n.setHours(0,0,0,0)),s=new Date(n.setHours(23,59,59,999));if("day"===t){const n=(new Date).getHours(),a=24-n,s=n/24*100;return{name:e.units[t].text,remaining:a,percentage:s.toFixed(2),unit:e.units[t].unit}}const i={week:()=>{const e=a.getDay(),t=0===e?-6:1-e;a.setDate(a.getDate()+t),s.setDate(a.getDate()+6)},month:()=>{a.setDate(1),s.setMonth(s.getMonth()+1,0)},year:()=>{a.setMonth(0,1),s.setMonth(11,31)}};i[t]?.();const r="day"===t?24:Math.floor((s-a)/864e5)+1,c=Math.floor((n-a)/(36e5*e.units[t].divider)),d=c/r*100;return{name:e.units[t].text,remaining:r-c,percentage:d.toFixed(2),unit:e.units[t].unit}}function n(){const n=["eventName","eventDate","daysUntil","countRight"].map((e=>document.getElementById(e)));if(n.some((e=>!e)))return;const[a,s,i,r]=n,c=Object.keys(e.units).reduce(((e,n)=>({...e,[n]:t(n)})),{}),d=Math.round((new Date(e.targetDate)-(new Date).setHours(0,0,0,0))/864e5);a.textContent=e.targetName,s.textContent=e.targetDate,i.textContent=d,r.innerHTML=Object.entries(c).map((([e,t])=>`\n                <div class="cd-count-item">\n                    <div class="cd-item-name">${t.name}</div>\n                    <div class="cd-item-progress">\n                        <div class="cd-progress-bar" style="width: ${t.percentage}%; opacity: ${t.percentage/100}"></div>\n                        <span class="cd-percentage ${t.percentage>=46?"cd-many":""}">${t.percentage}%</span>\n                        <span class="cd-remaining ${t.percentage>=60?"cd-many":""}">\n                            <span class="cd-tip">还剩</span>${t.remaining}<span class="cd-tip">${t.unit}</span>\n                        </span>\n                    </div>\n                </div>\n            `)).join("")}let a;const s=()=>{n(),a=setInterval(n,6e5)};return["pjax:complete","DOMContentLoaded"].forEach((e=>document.addEventListener(e,s))),document.addEventListener("pjax:send",(()=>a&&clearInterval(a))),{start:s,stop:()=>a&&clearInterval(a)}})();
//# sourceMappingURL=../../maps/static/js/countdown.js.map
